webpackJsonp([16],{SM2j:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={_httpCache:{},handlerResponse:function(e,t,a,n){var l=void 0;switch(!0){case Boolean(t&&(l=t(e))):n(l);break;default:a(e)}},getTableDataList:function(e,t){var a=this,n=function(e){if(0==e.body.code){var a=e.body.data,n=[],l=0;if(a){l=Number(a.total);for(var i=0,r=a.list;i<r.length;i++)n.push({name:r[i].deptName,attendNum:r[i].taotalPeople,status:r[i].noPeople,actualNum:r[i].comePeople,reachedNum:r[i].taotalPeople,id:r[i].uuid})}t(n,l)}};$http.post("http://172.16.1.106:8084/meeting/meeting/findMainMeeting",e,{loading:!0}).then(function(e){return a.handlerResponse(e,null,n)})},getDepartmentList:function(e,t){var a=this,n=function(e){if(0==e.body.code){var a=e.body.data,n=[];if(a){for(var l in a)n.push({value:a[l].code,label:a[l].name});n.unshift({value:"",label:"全部科室"})}t(n)}};$http.get("http://172.16.1.106:8084/meeting/meetingDept/findAllDept",null,{loading:!0}).then(function(e){return a.handlerResponse(e,null,n)})},setExport:function(e,t,a){var n=this,l=function(e){if(1==e.body.code)return{error:5,i18n:"add_error_2",text:e.body.msg}},i=function(e){if(0==e.body.code)return t({success:1,i18n:"set_success_1",text:e.body.msg})},r=function(e){a(e)};$http.get("http://172.16.1.106:8084/meeting/file/outSignExcel?meetingId="+e.meetingId,null,{loading:!0}).then(function(e){return n.handlerResponse(e,l,i,r)})}},l={methods:{initTable:function(){return{tableData:[],total:100,page:1}},setHeaderClass:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0===t?" background: linear-gradient(rgba(255,255,255,0.5),rgba(255,255,255,0.5)),linear-gradient(rgba(0,178,186,0.5),rgba(0,178,186,0.5));":""},handlerSearch:function(e){this.getTableData()},handlerDetail:function(e){this.$router.push("/attendance-mgt/main/"+e.name)},handlerExport:function(){},handlerRealTime:function(){this.$router.push("/attendance-mgt/main/real-time")},handleSizeChange:function(e){this.table.size=e,this.getTableData()},handleCurrentChange:function(e){this.table.page=$val,this.getTableData()},getTableData:function(){var e=this,t={size:this.table.size,page:this.table.page,meetingId:this.meetingId,deptCode:this.selectVal,deptName:this.searchText};n.getTableDataList(t,function(t,a){e.table.tableData=t,e.table.total=Number(a)})},getDepartmentList:function(){var e=this;n.getDepartmentList(null,function(t){e.selectOptions=t})}},created:function(){this.url=window.location.protocol+"//"+window.location.host},mounted:function(){this.meetingId=window.localStorage.getItem("METTING_ID"),this.getDepartmentList(),this.getTableData()},data:function(){return{url:"",meetingId:"",selectVal:"",selectOptions:[],searchText:"",table:this.initTable()}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"container-main"},[a("el-form",{ref:"form",attrs:{"label-width":"90px","label-position":"left",inline:!0}},[a("el-form-item",{attrs:{label:"科室名称"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.selectVal,callback:function(t){e.selectVal=t},expression:"selectVal"}},e._l(e.selectOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"科室模糊查询",clearable:"","prefix-icon":"el-icon-search"},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],1)],1),e._v(" "),a("el-button",{staticClass:"search-btn",attrs:{type:"primary",size:"small"},on:{click:e.handlerSearch}},[e._v("查询")]),e._v(" "),a("div",[a("a",{staticClass:"outer-btn",attrs:{href:e.url+"/meeting/file/outSignExcel?meetingId="+e.meetingId}},[e._v("导出")]),e._v(" "),a("el-button",{staticClass:"search-max-btn",attrs:{type:"primary",size:"small"},on:{click:e.handlerRealTime}},[e._v("实时考勤显示")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.table.tableData,"header-cell-style":e.setHeaderClass,border:"","max-height":"250"}},[a("el-table-column",{attrs:{align:"center",prop:"name",label:"科室名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"attendNum",label:"应到人数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"actualNum",label:"实到人数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.handlerDetail(t.row)}}},[e._v("详情")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"","current-page":e.table.page,"pager-count":e.$v.paging.pagerCount,layout:e.$v.paging.layout,total:e.table.total},on:{"current-change":e.handleCurrentChange}})],1)])},staticRenderFns:[]};var r=a("VU/8")(l,i,!1,function(e){a("dMjX")},"data-v-1db73046",null);t.default=r.exports},dMjX:function(e,t){}});