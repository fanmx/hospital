webpackJsonp([12],{Q6OG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={_httpCache:{},handlerResponse:function(e,t,n,a){var l=void 0;switch(!0){case Boolean(t&&(l=t(e))):a(l);break;default:n(e)}},getDepartmentList:function(e,t){var n=this,a=function(e){if(0==e.body.code){var n=e.body.data,a=[];if(n){for(var l in n)a.push({value:n[l].code,label:n[l].name});a.unshift({value:"",label:"全部科室"})}t(a)}};$http.get("http://172.16.1.106:8084/meeting/meetingDept/findAllDept",null,{loading:!0}).then(function(e){return n.handlerResponse(e,null,a)})},getPersonnelList:function(e,t){var n=this,a=function(e){if(0==e.body.code){var n=e.body.data,a=[];if(n){for(var l in n)a.push({value:n[l].code,label:n[l].name});a.unshift({value:"",label:"全部"})}t(a)}};$http.get("http://172.16.1.106:8084/meeting/findZd?type=zw&code=",null,{loading:!0}).then(function(e){return n.handlerResponse(e,null,a)})},getTableDataList:function(e,t){var n=this,a=function(e){if(0==e.body.code){var n=e.body.data,a=[],l=0;if(n){l=Number(n.total);for(var i=0,r=n.list;i<r.length;i++){var o="";r[i].picSmall&&(o=-1!=r[i].picSmall.indexOf(",")?r[i].picSmall.split(",")[0]:r[i].picSmall),a.push({name:r[i].name,personnel:r[i].position,photo:o,statu:"0"==r[i].state?"使用":"注销",num:r[i].code,theme:r[i].deptName,faceId:r[i].faceId,userId:r[i].userId})}}t(a,l)}};$http.get("http://172.16.1.106:8084/meeting/meetingFace/findAllMeetingFace?page="+e.page+"&size="+e.size+"&deptCode="+e.deptCode+"&position="+e.position+"&query="+e.query,null,{loading:!0}).then(function(e){return n.handlerResponse(e,null,a)})},setDel:function(e,t,n){var a=this,l=function(e){if(1==e.body.code)return{error:5,i18n:"add_error_2",text:e.body.msg}},i=function(e){if(0==e.body.code)return t({success:1,i18n:"set_success_1",text:e.body.msg})},r=function(e){n(e)};$http.post("http://172.16.1.106:8084/meeting/meetingFace/deleteMeetingFaceByList",e,{loading:!0}).then(function(e){return a.handlerResponse(e,l,i,r)})},setUpload:function(e,t,n){var a=this,l=function(e){if(1==e.body.code)return{error:5,i18n:"add_error_2",text:e.body.msg}},i=function(e){if(0==e.body.code)return t({success:1,i18n:"set_success_1",text:e.body.msg})},r=function(e){n(e)};$http.post("http://172.16.1.106:8084/meeting/meetingFace/imageAllExport",function(e){var t,n=void 0,a=void 0;for(a in n=new FormData,t=e.file[a])n.append("file"+a,t.raw);return n}(e),{loading:!0}).then(function(e){return a.handlerResponse(e,l,i,r)})}},l={methods:{handleUploadChange:function(e,t){var n=this,l=/\.(jpg|jpeg|png)$/.test(e.name),i=e.size/1024/1024<10;if(l||(this.$message.error("上传文件只能是 jpg/jpeg/png 格式 !"),t.pop()),i||(this.$message.error("上传文件不能超过10M !"),t.pop()),0!=t.length){a.setUpload({file:t},function(e){n.getTableData(),n.$message.success(e.text)},function(e){n.$message.error(e.text)})}return this.fileList=t,l&&i},initTable:function(){return{tableData:[{name:"",personnel:"",photo:"",statu:"",num:"",theme:""}],total:0,page:1,size:5}},handleSelectionChange:function(e){this.multipleSelection=e},setHeaderClass:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0===t?" background: linear-gradient(rgba(255,255,255,0.5),rgba(255,255,255,0.5)),linear-gradient(rgba(0,178,186,0.5),rgba(0,178,186,0.5));":""},handlerDepartmentChange:function(e){},handlerPersonnelChange:function(e){},handlerEdit:function(e){this.$router.push("/face-mgt/edit/"+e)},handlerSearch:function(){this.getTableData()},handlerAllDel:function(){var e=this;if(this.multipleSelection.length){var t=[];for(var n in this.multipleSelection)t.push(this.multipleSelection[n].faceId);var l={list:t};a.setDel(l.list,function(t){e.$message.success(t.text),e.getTableData()},function(t){e.$message.error(t.text)})}else this.$message.warning("请您至少选中一行！")},handlerImport:function(){},handlerAdd:function(){this.$router.push("/face-mgt/add")},handleSizeChange:function(e){this.table.size=e,this.getTableData()},handleCurrentChange:function(e){this.table.page=e,this.getTableData()},getTableData:function(){var e=this,t={size:this.table.size,page:this.table.page,deptCode:this.department,position:this.personnel,query:this.searchText};a.getTableDataList(t,function(t,n){e.table.tableData=t,e.table.total=Number(n)})},getDepartmentList:function(){var e=this;a.getDepartmentList(null,function(t){e.departmentOptions=t})},getPersonnelList:function(){var e=this;a.getPersonnelList(null,function(t){e.personnelOptions=t})}},created:function(){this.getDepartmentList(),this.getPersonnelList(),this.getTableData()},mounted:function(){},data:function(){return{fileList:[],multipleSelection:[],searchText:"",table:this.initTable(),department:"",departmentOptions:[],personnel:"",personnelOptions:[]}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"container-main"},[n("el-form",{ref:"form",attrs:{"label-width":"120px","label-position":"left",inline:!0}},[n("el-form-item",{attrs:{label:"科室"}},[n("el-select",{attrs:{placeholder:"请选择科室"},on:{change:e.handlerDepartmentChange},model:{value:e.department,callback:function(t){e.department=t},expression:"department"}},e._l(e.departmentOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"人员类型"}},[n("el-select",{staticClass:"two",attrs:{placeholder:"请选择人员"},on:{change:e.handlerPersonnelChange},model:{value:e.personnel,callback:function(t){e.personnel=t},expression:"personnel"}},e._l(e.personnelOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:""}},[n("el-input",{attrs:{placeholder:"请输入姓名或者科室",clearable:"","prefix-icon":"el-icon-search"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handlerSearchData(t):null}},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],1)],1),e._v(" "),n("el-button",{staticClass:"search-btn",attrs:{type:"primary",size:"small"},on:{click:e.handlerSearch}},[e._v("查询")]),e._v(" "),n("div",{staticClass:"btn-box"},[n("el-upload",{ref:"upload",attrs:{action:"#","auto-upload":!1,"on-change":e.handleUploadChange,"show-file-list":!1,"file-list":e.fileList,multiple:""}},[n("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("批量导入")])],1),e._v(" "),n("el-button",{staticClass:"search-btn btn-normal",attrs:{type:"primary",size:"small"},on:{click:e.handlerAdd}},[e._v("添加")]),e._v(" "),n("el-button",{staticClass:"search-btn btn-normal",attrs:{type:"primary",size:"small"},on:{click:e.handlerAllDel}},[e._v("删除")])],1),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.table.tableData,"header-cell-style":e.setHeaderClass,border:"","max-height":"216"},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{align:"center",type:"selection",width:"80"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",prop:"num",label:"工号"}}),e._v(" "),n("el-table-column",{attrs:{prop:"photo",label:"照片",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("img",{staticClass:"img",attrs:{src:e.$v.imgSrc+t.row.photo,alt:""}})]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"name",align:"center",label:"姓名"}}),e._v(" "),n("el-table-column",{attrs:{prop:"theme",align:"center",label:"科室"}}),e._v(" "),n("el-table-column",{attrs:{prop:"personnel",align:"center",label:"人员类型"}}),e._v(" "),n("el-table-column",{attrs:{prop:"statu",align:"center",label:"状态"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticClass:"search-btn btn-normal",attrs:{type:"primary",size:"small"},on:{click:function(n){e.handlerEdit(t.row.userId)}}},[e._v("编辑")])]}}])})],1),e._v(" "),n("el-pagination",{attrs:{background:"","current-page":e.table.page,"pager-count":e.$v.paging.pagerCount,layout:e.$v.paging.layout,total:e.table.total},on:{"current-change":e.handleCurrentChange}})],1)])},staticRenderFns:[]};var r=n("VU/8")(l,i,!1,function(e){n("SOfD")},"data-v-4edb1a9a",null);t.default=r.exports},SOfD:function(e,t){}});