webpackJsonp([14],{"/eM3":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={_httpCache:{},handlerResponse:function(e,t,n,a){var r=void 0;switch(!0){case Boolean(t&&(r=t(e))):a(r);break;default:n(e)}},setSave:function(e,t,n){var a=this,r=function(e){if(0!=e.body.code)return{text:e.body.msg}},i=function(e){if(0==e.body.code)return t({text:e.body.msg})},o=function(e){n(e)};$http.post("http://172.16.1.106:8084/meeting/manager/addMeeting",e,{loading:!0}).then(function(e){return a.handlerResponse(e,r,i,o)})},getDepartmentList:function(e,t){var n=this,a=function(e){if(0==e.body.code){var n=e.body.data,a=[];if(n)for(var r in n)a.push({value:n[r].code,label:n[r].name});t(a)}};$http.get("http://172.16.1.106:8084/meeting/meetingDept/findAllDept",null,{loading:!0}).then(function(e){return n.handlerResponse(e,null,a)})},getPersonneInfo:function(e,t){var n=this,a=function(e){if(0==e.body.code){var n=e.body.data,a=[];if(n)for(var r in n)a.push({value:n[r].code,label:n[r].name});t(a)}};$http.get("http://172.16.1.106:8084/meeting/meetingUser/getMeetingUserDto?deptCode="+e.deptCode,null,{loading:!0}).then(function(e){return n.handlerResponse(e,null,a)})},getTableDataList:function(e,t){var n=this,a=function(e){if(0==e.body.code){var n=e.body.data,a=[];if(n)for(var r=0,i=n.list;r<i.length;r++)a.push({value:i[r].uuid,label:i[r].name});t(a)}};$http.get("http://172.16.1.106:8084/meeting/meetingRoom/findAllMeetingRoom",null,{loading:!0}).then(function(e){return n.handlerResponse(e,null,a)})},getDetailInfo:function(e,t){var n=this,a=function(e){if(0==e.body.code){var n=e.body.data,a={id:n.uuid,name:n.meetingName,template:"",templateOptions:[],meetTimeDate:n.startTime.substring(0,10),meetTime:n.startTime.substring(11),reservation:n.reservations,reservationOptions:[],department:n.deptCode,departmentOptions:[],personnel:"",personnelOptions:[],place:n.roomAddress,placeOptions:[],signOutTime:[n.signBackBeginTime.substring(11),n.signBackBeginTime.substring(11)],signInTime:[n.signInBeginTime.substring(11),n.signInEndTime.substring(11)],message:n.remarks,tableData:[]};if(n.userList)for(var r in n.userList)a.tableData.push({department:n.userList[r].deptName,personnel:n.userList[r].name,id:n.userList[r].userId});t(a)}};$http.get("http://172.16.1.106:8084/meeting/manager/meetingDetailedByUUID?uuid="+e.id,null,{loading:!0}).then(function(e){return n.handlerResponse(e,null,a)})}},r={methods:{initForm:function(){return{name:"",template:"",templateOptions:[],meetTimeDate:(new Date).toFormatString("YYYY-MM-DD"),meetTime:(new Date).toFormatString("hh:mm:ss"),reservation:"",reservationOptions:[],department:"",departmentOptions:[],personnel:"",personnelOptions:[],place:"",placeOptions:[],signOutTime:["00:00:00","23:59:00"],signInTime:["00:00:00","23:59:00"],message:""}},initRules:function(){return{name:[{required:!0,message:"请输入会议名称",trigger:"blur"}],meetTime:[{required:!0,message:"请输入会议时间",trigger:"blur"}],signInTime:[{required:!0,message:"请输入签到时间",trigger:"blur"}],signOutTime:[{required:!0,message:"请输入签退时间",trigger:"blur"}],place:[{required:!0,message:"请选择会议地点",trigger:"blur"}],department:[{required:!0,message:"请选择科室",trigger:"blur,change"}],personnel:[{required:!0,message:"请输入参会人员",trigger:"blur,change"}]}},handleDel:function(e){this.tableData.splice(this.tableData.findIndex(function(t){return t.id===e.id}),1)},setHeaderClass:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;return 0===t?" background: linear-gradient(rgba(255,255,255,0.5),rgba(255,255,255,0.5)),linear-gradient(rgba(0,178,186,0.5),rgba(0,178,186,0.5));":""},handlerMeetTimeDateChange:function(e){},handlerSaveTemplate:function(){},handlerSignInTimeChange:function(e){this.form.signInTime=e},handlerSignOutTimeChange:function(e){this.form.signOutTime=e},handlerTemplateChange:function(e){},handlerMeetTimeChange:function(e){this.form.meetTime=e},handlerDepartmentChange:function(e){this.form.department=e,this.form.personnel="",this.getPersonneInfo(e)},handlerPersonnelChange:function(e){var t;t=this.form.personnelOptions.find(function(t){return t.value===e}).label,this.tableData.unshift({department:this.form.department,personnel:t,id:e})},handlerReservationChange:function(e){},handleSubmit:function(e){var t=this;this.$refs.form.validate(function(n){if(!n)return!1;var r=[];for(var i in t.tableData)r.push({userId:t.tableData[i].id,deptCode:t.tableData[i].department});var o={meetingName:t.form.name,startTime:t.form.meetTimeDate+" "+t.form.meetTime,signInBeginTime:t.form.meetTimeDate+" "+t.form.signInTime[0],signInEndTime:t.form.meetTimeDate+" "+t.form.signInTime[1],signBackBeginTime:t.form.meetTimeDate+" "+t.form.signOutTime[0],signBackEndTime:t.form.meetTimeDate+" "+t.form.signOutTime[1],meetingRoomId:t.form.place,remarks:t.form.message,userList:r,reservations:t.form.reservation,state:e};a.setSave(o,function(e){t.$message.success(e.text)},function(e){t.$message.error(e.text)})})},getTableData:function(){var e=this;a.getTableDataList(null,function(t){e.form.placeOptions=t,e.form.place=t[0].value})},getDepartmentList:function(){var e=this;a.getDepartmentList(null,function(t){e.form.departmentOptions=t,e.form.department=t[0].value,e.getPersonneInfo(t[0].value)})},getPersonneInfo:function(e){var t=this;a.getPersonneInfo({deptCode:e},function(e){t.form.personnelOptions=e})},getDetailInfo:function(){var e=this,t={id:this.id};a.getDetailInfo(t,function(t){e.form=t,e.tableData=t.tableData,e.getDepartmentList(),e.getTableData()})}},mounted:function(){this.getDetailInfo()},data:function(){return{id:this.$route.params.id,form:this.initForm(),formRules:this.initRules(),tableData:[],pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}}}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"container-main"},[n("el-form",{ref:"form",staticClass:"form",attrs:{"label-width":"160px","label-position":"left",model:e.form,rules:e.formRules,disabled:""}},[n("el-form-item",{attrs:{label:" 选择模版：",prop:"template"}},[n("el-select",{attrs:{placeholder:"请选择模版"},on:{change:e.handlerTemplateChange},model:{value:e.form.template,callback:function(t){e.$set(e.form,"template",t)},expression:"form.template"}},e._l(e.form.templateOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"会议名称：",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入会议名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"会议日期：",prop:"meetTimeDate"}},[n("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd","default-value":e.form.meetTimeDate,clearable:!1,format:"yyyy-MM-dd","picker-options":e.pickerOptions,type:"date","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.handlerMeetTimeDateChange},model:{value:e.form.meetTimeDate,callback:function(t){e.$set(e.form,"meetTimeDate",t)},expression:"form.meetTimeDate"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"会议时间：",prop:"meetTime"}},[n("el-time-picker",{attrs:{clearable:!1,"value-format":"HH:mm:ss","default-value":e.form.meetTime,placeholder:"会议时间"},model:{value:e.form.meetTime,callback:function(t){e.$set(e.form,"meetTime",t)},expression:"form.meetTime"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"签到时间：",prop:"signInTime"}},[n("el-time-picker",{attrs:{"is-range":"","value-format":"HH:mm:ss","default-value":e.form.signInTime,clearable:!1,format:"HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},on:{change:e.handlerSignInTimeChange},model:{value:e.form.signInTime,callback:function(t){e.$set(e.form,"signInTime",t)},expression:"form.signInTime"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"签退时间：",prop:"signOutTime"}},[n("el-time-picker",{attrs:{"is-range":"","value-format":"HH:mm:ss","default-value":e.form.signOutTime,clearable:!1,format:"HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},on:{change:e.handlerSignOutTimeChange},model:{value:e.form.signOutTime,callback:function(t){e.$set(e.form,"signOutTime",t)},expression:"form.signOutTime"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"会议地点：",prop:"place"}},[n("el-select",{attrs:{placeholder:"请选择会议地点"},model:{value:e.form.place,callback:function(t){e.$set(e.form,"place",t)},expression:"form.place"}},e._l(e.form.placeOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"参会人员：",prop:"department"}},[n("el-select",{attrs:{placeholder:"请选择科室"},on:{change:e.handlerDepartmentChange},model:{value:e.form.department,callback:function(t){e.$set(e.form,"department",t)},expression:"form.department"}},e._l(e.form.departmentOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),n("el-select",{staticClass:"two",attrs:{placeholder:"请选择人员"},on:{change:e.handlerPersonnelChange},model:{value:e.form.personnel,callback:function(t){e.$set(e.form,"personnel",t)},expression:"form.personnel"}},e._l(e.form.personnelOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),n("el-form-item",[n("el-table",{staticStyle:{width:"401px"},attrs:{data:e.tableData,"header-cell-style":e.setHeaderClass,border:"","max-height":"400"}},[n("el-table-column",{attrs:{align:"center",prop:"department",width:"200",label:"科室名称"}}),e._v(" "),n("el-table-column",{attrs:{prop:"personnel",label:"参会人员",width:"200",align:"center"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:" 预订人：",prop:"reservation"}},[n("el-input",{attrs:{placeholder:"请输入预订人"},model:{value:e.form.reservation,callback:function(t){e.$set(e.form,"reservation",t)},expression:"form.reservation"}})],1),e._v(" "),n("el-form-item",{attrs:{label:" 会议议题说明：",prop:"message"}},[n("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:e.form.message,callback:function(t){e.$set(e.form,"message",t)},expression:"form.message"}})],1)],1)],1)])},staticRenderFns:[]};var o=n("VU/8")(r,i,!1,function(e){n("iCvU")},"data-v-36b23086",null);t.default=o.exports},iCvU:function(e,t){}});