webpackJsonp([1],{en3F:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={_httpCache:{},handlerResponse:function(e,t,n,a){var o=void 0;switch(!0){case Boolean(t&&(o=t(e))):a(o);break;default:n(e)}},getDetailInfo:function(e,t){var n=this,a=function(e){if(0==e.body.code){var n=e.body.data,a={address:"",email:"",landLine:"",phone:"",birthday:(new Date).toFormatString("YYYY-MM-DD"),sex:"0",face:"",department:"",personnel:"",fileList:[]};if(n&&(a={address:n.address,email:n.email,landLine:n.landLine,phone:n.phone,birthday:n.birthday,sex:n.sex,face:n.faceId,department:n.deptCode,personnel:n.name,fileList:[],userId:n.userId,position:n.position},n.picSmall))for(var o=n.picSmall.split(","),r=0;r<o.length;r++)a.fileList.push({name:r,url:o[r]});t(a)}};$http.get("http://172.16.1.106:8084/meeting/meetingFace/findMeetingFaceByUUId?userId="+e.faceId,null,{loading:!0}).then(function(e){return n.handlerResponse(e,null,a)})},getPersonneInfo:function(e,t){var n=this,a=function(e){if(0==e.body.code){var n=e.body.data,a=[];if(n)for(var o in n)a.push({value:n[o].code,label:n[o].name});t(a)}};$http.get("http://172.16.1.106:8084/meeting/meetingUser/getMeetingUserDto?deptCode="+e.deptCode,null,{loading:!0}).then(function(e){return n.handlerResponse(e,null,a)})},setAdd:function(e,t,n){var a=this,o=function(e){if(1==e.body.code)return{error:5,i18n:"add_error_2",text:e.body.msg}},r=function(e){if(0==e.body.code)return t({success:1,i18n:"set_success_1",text:e.body.msg})},i=function(e){n(e)};$http.post("http://172.16.1.106:8084/meeting/meetingFace/addMeetingFace",e,{loading:!0}).then(function(e){return a.handlerResponse(e,o,r,i)})},getDepartmentList:function(e,t){var n=this,a=function(e){if(0==e.body.code){var n=e.body.data,a=[];if(n)for(var o in n)a.push({value:n[o].code,label:n[o].name});t(a)}};$http.get("http://172.16.1.106:8084/meeting/meetingDept/findAllDept",null,{loading:!0}).then(function(e){return n.handlerResponse(e,null,a)})},setEdit:function(e,t,n){var a=this,o=function(e){if(1==e.body.code)return{error:5,i18n:"add_error_2",text:e.body.msg}},r=function(e){if(0==e.body.code)return t({success:1,i18n:"set_success_1",text:e.body.msg})},i=function(e){n(e)};$http.post("http://172.16.1.106:8084/meeting/meetingFace/updateMeetingFace",e,{loading:!0}).then(function(e){return a.handlerResponse(e,o,r,i)})},setUpload:function(e,t,n){var a=this,o=function(e){if(1==e.body.code)return{error:5,i18n:"add_error_2",text:e.body.msg}},r=function(e){if(0==e.body.code)return t({success:1,i18n:"set_success_1",text:e.body.msg,data:e.body.data})},i=function(e){n(e)};$http.post("http://172.16.1.106:8084/meeting/file/fileUpLoad",function(e){var t=void 0,n=void 0,a=void 0;for(a in t=new FormData,n=e.data)t.append(a,n[a]);for(a=0;n=e.file[a];a++)t.append("file"+a,n.raw);return t}(e),{loading:!0}).then(function(e){return a.handlerResponse(e,o,r,i)})}},o={methods:{initForm:function(){return{position:"",address:"",email:"",landLine:"",phone:"",birthday:(new Date).toFormatString("YYYY-MM-DD"),sex:"0",face:"",department:"",personnel:"",fileList:[]}},initRules:function(){return{face:[{required:!0,message:"请输入工号",trigger:"blur"}],department:[{required:!0,message:"请选择科室类型",trigger:"blur"}],personnel:[{required:!0,message:"请输入姓名",trigger:"blur"}]}},handleRemove:function(e,t){console.log("del",e),console.log("dels",t)},handleUploadChange:function(e,t){var n=this,o=/\.(jpg|jpeg|png)$/.test(e.name),r=e.size/1024/1024<10;if(o||(this.$message.error("上传文件只能是 jpg/jpeg/png 格式 !"),t.pop()),r||(this.$message.error("上传文件不能超过10M !"),t.pop()),0!=t.length&&1==t.length){a.setUpload({file:t},function(e){n.imgDataList.push(e),n.$message.success(e.text)},function(e){n.$message.error(e.text)})}return this.form.fileList=t,o&&r},handlerTypeChange:function(e){this.form.department=e},handleSubmit:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return!1;var n={code:e.form.face,name:e.form.personnel,deptCode:e.form.department,position:e.form.position,sex:e.form.sex,email:e.form.email,landLine:e.form.landLine,phone:e.form.phone,birthday:e.form.birthday,address:e.form.address,picList:e.imgDataList},o=function(t){e.$message.success(t.text),e.$router.push("/face-mgt")},r=function(t){e.$message.error(t.text)};e.faceId?a.setEdit(n,o,r):a.setAdd(n,o,r)})},handlerCancel:function(){this.$router.push("/face-mgt")},getDetailInfo:function(){var e=this,t={faceId:this.faceId};a.getDetailInfo(t,function(t){e.form=t,e.parseData={faceId:t.face}})},getDepartmentList:function(){var e=this;a.getDepartmentList(null,function(t){e.departmentOptions=t})}},mounted:function(){this.getDepartmentList(),this.faceId=this.$route.params.faceId,("0"==this.faceId||this.faceId)&&this.getDetailInfo()},data:function(){return{parseData:{faceId:null},faceId:null,isDel:!1,form:this.initForm(),formRules:this.initRules(),departmentOptions:[],imgDataList:[]}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"container-main"},[n("el-form",{ref:"ruleForm",staticClass:"form",attrs:{"label-width":"160px","label-position":"left",model:e.form,rules:e.formRules}},[n("el-form-item",{attrs:{label:"工号：",prop:"face"}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.face,callback:function(t){e.$set(e.form,"face",t)},expression:"form.face"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"姓名：",prop:"personnel"}},[n("el-input",{attrs:{clearable:""},model:{value:e.form.personnel,callback:function(t){e.$set(e.form,"personnel",t)},expression:"form.personnel"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"科室类型：",prop:"department"}},[n("el-select",{attrs:{placeholder:"请选择科室类型"},on:{change:e.handlerTypeChange},model:{value:e.form.department,callback:function(t){e.$set(e.form,"department",t)},expression:"form.department"}},e._l(e.departmentOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"职位名称：",prop:"position"}},[n("el-input",{model:{value:e.form.position,callback:function(t){e.$set(e.form,"position",t)},expression:"form.position"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"图片上传：",prop:"picSmall"}},[n("el-upload",{ref:"upload",attrs:{action:"#","list-type":"picture-card","auto-upload":!1,"on-change":e.handleUploadChange,"on-remove":e.handleRemove,"file-list":e.form.fileList,limit:3}},[n("el-button",{staticClass:"bi-button  @fill-blue"},[e._v("上传")]),e._v(" "),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("（最多上传3个，支持png,jpg格式且文件大小不得超过10M）")])],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"性别：",prop:"sex"}},[n("el-radio",{attrs:{label:"0"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[e._v("男")]),e._v(" "),n("el-radio",{attrs:{label:"1"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[e._v("女")])],1),e._v(" "),n("el-form-item",{attrs:{label:"生日：",prop:"birthday"}},[n("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd","default-value":e.form.birthday,clearable:!1,format:"yyyy-MM-dd",type:"date"},model:{value:e.form.birthday,callback:function(t){e.$set(e.form,"birthday",t)},expression:"form.birthday"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"电话：",prop:"landLine"}},[n("el-input",{model:{value:e.form.landLine,callback:function(t){e.$set(e.form,"landLine",t)},expression:"form.landLine"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"手机号：",prop:"phone"}},[n("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"家庭住址：",prop:"address"}},[n("el-input",{model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"电子邮件：",prop:"email"}},[n("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),e._v(" "),n("div",{staticClass:"label-fade"},[n("el-button",{staticClass:"search-btn",attrs:{type:"primary",size:"small"},on:{click:e.handleSubmit}},[e._v("确定")]),e._v(" "),n("el-button",{staticClass:"search-btn",attrs:{type:"primary",size:"small"},on:{click:e.handlerCancel}},[e._v("取消")])],1)],1)])},staticRenderFns:[]};var i=n("VU/8")(o,r,!1,function(e){n("jR4K")},"data-v-55ffa9b4",null);t.default=i.exports},jR4K:function(e,t){}});