webpackJsonp([0],{OwKn:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={_httpCache:{},handlerResponse:function(e,t,n,i){var a=void 0;switch(!0){case Boolean(t&&(a=t(e))):i(a);break;default:n(e)}},getDetailInfo:function(e,t){var n=this,i=function(e){if(0==e.body.code){var n=e.body.data,i={name:n.name,place:n.address,device:n.equipment,deviceOptions:[{label:"临床",value:"0"},{label:"职能",value:"1"}],state:n.state,stateOptions:[{label:"主会议",value:"0"},{label:"一般会议室",value:"1"}]};t(i)}};$http.get("http://172.16.1.106:8084/meeting/meetingRoom/findByUUID?uuid="+e.id,null,{loading:!0}).then(function(e){return n.handlerResponse(e,null,i)})},getDeviceList:function(e,t){var n=this,i=function(e){if(0==e.body.code){var n=e.body.data,i=[];if(n.list)for(var a=0,o=n.list;a<o.length;a++)i.push({value:o[a].uuid,label:o[a].name});t(i)}};$http.get("http://172.16.1.106:8084/meeting/getRoomEquipment",null,{loading:!0}).then(function(e){return n.handlerResponse(e,null,i)})},setAdd:function(e,t,n){var i=this,a=function(e){if(1==e.body.code)return{error:5,i18n:"add_error_2",text:e.body.msg}},o=function(e){if(0==e.body.code)return t({success:1,i18n:"set_success_1",text:e.body.msg})},r=function(e){n(e)};$http.post("http://172.16.1.106:8084/meeting/meetingRoom/addMeetingRoom",e,{loading:!0}).then(function(e){return i.handlerResponse(e,a,o,r)})},setEdit:function(e,t,n){var i=this,a=function(e){if(1==e.body.code)return{error:5,i18n:"add_error_2",text:e.body.msg}},o=function(e){if(0==e.body.code)return t({success:1,i18n:"set_success_1",text:e.body.msg})},r=function(e){n(e)};$http.post("http://172.16.1.106:8084/meeting/meetingRoom/updateMeetingRoom",e,{loading:!0}).then(function(e){return i.handlerResponse(e,a,o,r)})}},a={methods:{initForm:function(){return{place:"",name:"",device:"",deviceOptions:[],state:"0",stateOptions:[{label:"主会议",value:"0"},{label:"一般会议室",value:"1"}]}},initRules:function(){return{name:[{required:!0,message:"请输入会议室名称",trigger:"blur"}],place:[{required:!0,message:"请输入位置描述",trigger:"blur"}],device:[{required:!0,message:"请选择设备列表",trigger:"blur"}]}},handlerStateChange:function(e){this.form.state=e},handlerTypeChange:function(e){this.form.device=e},handleSubmit:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return!1;var n={uuid:e.id,address:e.form.place,name:e.form.name,equipment:e.form.device,state:e.form.state},a=function(t){e.$message.success(t.text),e.$router.push("/agenda-mgt/room")},o=function(t){e.$message.error(t.text)};e.id?i.setEdit(n,a,o):i.setAdd(n,a,o)})},handlerCancel:function(){this.$router.push("/agenda-mgt/room")},getDetailInfo:function(){var e=this,t={id:this.id};i.getDetailInfo(t,function(t){e.form=t,e.getDeviceList()})},getDeviceList:function(){var e=this;i.getDeviceList(null,function(t){e.form.deviceOptions=t})}},mounted:function(){this.id&&this.getDetailInfo()},data:function(){return{id:this.$route.params.id,form:this.initForm(),formRules:this.initRules()}}},o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"container-main"},[n("el-form",{ref:"ruleForm",staticClass:"form",attrs:{"label-width":"160px","label-position":"left",model:e.form,rules:e.formRules}},[n("el-form-item",{attrs:{label:"会议室名称：",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入会议室名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"位置描述：",prop:"place"}},[n("el-input",{attrs:{placeholder:"请输入位置描述"},model:{value:e.form.place,callback:function(t){e.$set(e.form,"place",t)},expression:"form.place"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"设备列表：",prop:"device"}},[n("el-select",{attrs:{placeholder:"请选择设备列表"},on:{change:e.handlerTypeChange},model:{value:e.form.device,callback:function(t){e.$set(e.form,"device",t)},expression:"form.device"}},e._l(e.form.deviceOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),n("div",{staticClass:"label-fade"},[n("el-button",{staticClass:"search-btn",attrs:{type:"primary",size:"small"},on:{click:e.handleSubmit}},[e._v("确定")]),e._v(" "),n("el-button",{staticClass:"search-btn",attrs:{type:"primary",size:"small"},on:{click:e.handlerCancel}},[e._v("取消")])],1)],1)])},staticRenderFns:[]};var r=n("VU/8")(a,o,!1,function(e){n("qXBs")},"data-v-620d06e8",null);t.default=r.exports},qXBs:function(e,t){}});